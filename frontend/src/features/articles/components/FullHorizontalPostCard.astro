---
import Picutre from '~/components/common/Picture.astro';
import { BLOG, ROUTES } from '~/config';
import { findImage } from '~/utils/images';
import { Post } from '~/utils/posts';

interface Props {
  post: Post;
}

const { post } = Astro.props;
const image = await findImage(post.image);
const articleUrl = BLOG.post.pathname + '/' + post.id;
---

<article class="grid md:grid-cols-2 gap-6 md:gap-8">
  <a
    class="block group relative pb-[56.25%] md:pb-[75%] h-0 md:h-80 overflow-hidden rounded shadow-lg"
    href={articleUrl}
    underline-hover="false"
  >
    <Picutre
      src={image}
      class="absolute inset-0 object-cover w-full h-full mb-6"
      widths={[400, 900]}
      sizes="(max-width: 900px) 400px, 900px"
      alt={post.title}
      aspectRatio="16:9"
    />
  </a>
  <div class="flex flex-col justify-between">
    <div>
      <header>
        <h2 class="text-header-sm font-bold mb-3 font-heading clamp-3">
          <a
            class="text-primary-600 hover:text-secondary-700 underline underline-offset-4 decoration-1 decoration-dotted transition ease-in duration-200"
            href={articleUrl}
            underline-hover="false"
          >
            {post.title}
          </a>
        </h2>
      </header>

      <p class="text-body-md flex-grow clamp-7">
        {post.description}
      </p>
    </div>

    <footer class="mt-4">
      <div>
        <span class="text-primary-200">
          <time datetime={post.publishDate}>{post.publishDate}</time> ~
          {post.readingTime} min
        </span>
      </div>
    </footer>
  </div>
</article>
